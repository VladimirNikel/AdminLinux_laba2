# Администрирование Linux. ДЗ №2
## BASH-скрипт, анализирующий log-файлы


## Цель:
> Написать bash-скрипт, который анализирует лог-файл. Ссылка на лог-файл приложена.
> Скрипт должен:
> 1. принимать путь до анализируемого файла как параметр и завершаться, отдавая сообщение об ошибке с кодом 10, если параметр не задан;
> 2. анализировать доступность файла по заданному пути и завершаться, отдавая сообщение об ошибке с кодом 20, если файл не существует;
> 3. формировать в stdout аналитической отчёт с момента последнего(!!!) запуска скрипта, который содержит:
> - обработанный скриптом временной диапазон;
> - топ-15 IP-адресов, с которых посещался сайт в виде пар "IP-адрес и количество запросов";
> - топ-15 ресурсов сайта, которые запрашивались клиентами (например, /downloads/product_1) в виде пар "ресурс и количество запросов";
> - список всех кодов возврата с указанием их количества в виде пар "код возврата и количество";
> - список кодов возврата 4xx и 5xx (только ошибки) с указанием их количества в виде пар "код возврата и количество".
> 4. содержать защиту от мультизапуска;
> 5. автоматически завершаться, если в теле скрипта будет обнаружена ошибка при его выполнении;
> 6. сопровождаться документацией (комментарии в теле скрипта или отдельный README).
> Не обязательно, но попробуйте использовать внутри скрипта trap, sed и функции.


## Инструкция по работе:
1. Скачать/стянуть репозиторий
1. Перейти в папку репозитория
1. Выполнить команду `chmod +x script.sh`
1. Запустить скрипт на повылнение командой `./script.sh <путь log-файла>`


## Имеющиеся функции:
1. Реализована проверка на передачу параметра (пути до log-файла)
  * Если путь не передан - завершаем работу скрипта кодом `10`
  * Если путь передан - работаем далее (идем во вторую проверку)
2. Реализована проверка на передачу именно файла (а не директории)
  * Если передан не файл, либо его не существует - завершаем работу скрипта кодом `20`
  * Если передан именно файл, то работаем далее (идем в третью проверку)
3. Реализована проверка файла на пустоту
  * Если файл пустой - завершаем работу скрипта кодом `30`
  * Если файл не пуст - выполняем основную работу (четвертое действие)
4. Работа с log'ом:
  * Выводит обрабатываемый диапазон дат
  * Выводит Топ-15 IP-адресов, с которых посещался сайт
  * Выводит Топ-15 ресурсов сайта, которые запрашивались клиентами
  * Выводит Список всех кодов возврата
  * Выводит писок кодов возврата 4xx и 5xx (только ошибки)
5. Так же реализована проверка на мультизапуск
  * Если запущено больше 1-го, то скрипт завершит свою работу кодом `40`
  * Иначе просто выполняется весь код скрипта


## Инструментарий:
- GIT (устанавливается командой `sudo apt install git -y`)
- BASH (вроде идет в составе linux, но на всякий случай команда для установки `sudo apt install bash`)